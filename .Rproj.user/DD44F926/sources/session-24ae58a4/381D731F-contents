#if running on cluster load necessary modules.  This includes HDF5, GSL, GDAL, UDUNITS, JAGS, R (#load most recent versions)
#tested on cluster with R 4.4

Drepos<-'https://cloud.r-project.org'
install.packages("remotes", repos=Drepos)
remotes::install_github("satijalab/seurat", "seurat5")
install.packages("scCustomize", repos=Drepos)
install.packages(c("devtools", "list","hdf5r", "tidyverse",
                   "openxlsx", "prettydoc", "kableExtra", "pals", "ComplexHeatmap",
                   "ClusterR", "mixtools","Cairo", "refGenome", "ggplot2"))
devtools::install_github("immunogenomics/presto")

install.packages("BiocManager")
packages<-c('BiocGenerics','DelayedArray','DelayedMatrixStats','limma',
            'S4Vectors','SingleCellExperiment','SummarizedExperiment',
            'batchelor','apeglm','EnhancedVolcano','ashr','fgsea',
            'TxDb.Hsapiens.UCSC.hg38.knownGene','multtest',
            'edgeR', 'sva','RBGL','reshape','WGCNA','GEOquery',
            'oligo','GSEABase','Rsubread','statmod','Gviz',
            'ggbio','vcfR','AnnotationHub','EnrichedHeatmap','GenomicRanges','motifmatchr',
            'chromVAR','Rsamtools','Biostrings','ComplexHeatmap','ShortRead','BSgenome',
            'EnsDb.Hsapiens.v86','BSgenome.Hsapiens.UCSC.hg38','JASPAR2018',
            'patchwork','R453Plus1Toolbox','GenomicFeatures','BiocStyle','HPAanalyze',
            'DESeq2','TFBSTools', 'ChIPpeakAnno', 'org.Mm.eg.db', 'factoextra',  'ChIPQC',
            'rGREAT', 'soGGi', 'DiffBind', 'piano', 'Rhtslib', 'motifmatchr', 'DirichletMultinomial')
BiocManager::install(packages)
#find failures and try again if needed
packages<-packages[!packages %in% installed.packages()[,1]]
BiocManager::install(packages)


install.packages("rextendr", repos=Drepos)
#install.packages("MatrixExtra")
install.packages("RcppMsgPack", repos=Drepos)
install.packages("caret", repos=Drepos)
install.packages('ragg', repos=Drepos)
devtools::install_github('cole-trapnell-lab/monocle3')
remotes::install_github("furlan-lab/viewmastR")
devtools::install_github("furlan-lab/scrubletR")
devtools::install_github("furlan-lab/mergebamsR")
devtools::install_github("furlan-lab/rustytools")
devtools::install_github("rpolicastro/scProportionTest")
devtools::install_github("eliocamp/ggnewscale")
install.packages("Signac", repos=Drepos)
BiocManager::install("ggtree")
install.packages('numbat', dependencies = TRUE, repos=Drepos)
install.packages("rjags")
devtools::install_github("broadinstitute/infercnv")


devtools::install_github("GreenleafLab/ArchR", ref="master", repos = BiocManager::repositories())
ArchR::installExtraPackages()
install.packages('reticulate', repos=Drepos)

